<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<title>EduPass | Books</title>
	<link rel='icon' type='image/svg+xml' href='logo.svg'>
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i|Roboto+Condensed:400,700' rel='stylesheet'>
	<link rel='stylesheet' type='text/css' href='../common.css'>
	<link rel='stylesheet' type='text/css' href='../layout.css'>
	<style>
		#content{
			display: inline-block;
			background-color: #ececec;
			border-radius: 12px;
			width: 100%;
		}
		main div table {
			width: calc(100% + 16px);
			margin-left: -16px;
			border-spacing: 16px 6px;
			border-collapse: separate;
		}
		main div table td {
			border-radius: 6px;
			background-color: #cfcfcf;
			padding: 8px 12px;
			box-shadow: 0px 1px 2px rgba(0, 0, 0, .5);
			position: relative;
		}
		.overdue td:last-child::after {
			content: '!';
			background-color: #f00;
			border-radius: 50%;
			line-height: 32px;
			height: 32px;
			width: 32px;
			color: #fff;
			display: inline-block;
			text-align: center;
			position: absolute;
			right: 12px;
			top: 10px;
		}
		/*----extra info----*/
        .tooltip .tooltiptext {
            display: none;
            transition: opacity 0.15s;
            width: 240px;
            background-color: #ffffff;
            color: #000000;
            text-align: left;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            top: 100%;
            left: 50%;
            margin-left: -60px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, .3);
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent transparent black transparent;
        }

        .tooltip:hover .tooltiptext, .tooltip .tooltiptext:hover{
            display: inline-block;
        }
        .tooltiptext .od::after{
            content: '!';
	        background-color: #f00;
	        border-radius: 50%;
	        line-height: 32px;
	        height: 32px;
		    width: 32px;
		    color: #fff;
		    display: inline-block;
		    text-align: center;
		    position: absolute;
		    right: 12px;
		    top: 10px;
        }
	</style>
	<script>
		let TYPE;
		switch (window.location.hash.substr(1)) {
			case 'school':
				TYPE = {
					short: 'school',
					long: 'School'
				};
				break;
			case 'nlb':
				TYPE = {
					short: 'nlb',
					long: 'National Library'
				};
				break;
			default:
				location.href = 'index.html';
		}
		// Fetch from database based on TYPE
		const DATA = {
			school: [
				{
					due: new Date(Date.UTC(2019, 0, 3)),
					name: "A Certain Magical Index: Volume 22",
					sypnosis: "Kamijou Touma is a student living in Academy City, a highly advanced place in terms of technology. Despite being gauged as a level zero esper (no powers), he possesses on his right hand the Imagine Breaker, an ability that negates any power whatsoever. Touma finds a young girl named Index who is trying to run away from Necessarius, a powerful magic organization that she is member of. Blessed with the skill of memorizing any sort of information, she holds 103,000 forbidden magical books within her head. As science and magic cross paths, Touma must face several dangers amid espers and magicians who appear in the exciting scientific town.",
					author: "Kazuma Kamachi"
				},
				{
					due: new Date(Date.UTC(2019, 10, 4)),
					name: "《你的名字。》",
					sypnosis: "Mitsuha Miyamizu, a high school girl, yearns to live the life of a boy in the bustling city of Tokyo—a dream that stands in stark contrast to her present life in the countryside. Meanwhile in the city, Taki Tachibana lives a busy life as a high school student while juggling his part-time job and hopes for a future in architecture. One day, Mitsuha awakens in a room that is not her own and suddenly finds herself living the dream life in Tokyo—but in Taki's body! Elsewhere, Taki finds himself living Mitsuha's life in the humble countryside. In pursuit of an answer to this strange phenomenon, they begin to search for one another. Kimi no Na wa. revolves around Mitsuha and Taki's actions, which begin to have a dramatic impact on each other's lives, weaving them into a fabric held together by fate and circumstance",
					author: "Makoto Shinkai"
				},
				{
					due: new Date(Date.UTC(2019, 11, 5)),
					name: "SMO Sample Questions: A Compendium",
					sypnosis: "",
					author: ""
				},
				{
					due: new Date(Date.UTC(2019, 11, 5)),
					name: "The Theory Of Everything"
				}
			],
			nlb: [
				{
					due: new Date(Date.UTC(2019, 0, 3)),
					name: "LKY",
					sypnosis: "a bibliography of our GOD EMPEROR LEE KUAN YEW, the savior of the fatherland",
					author: "OUR GOD EMPEROR LEE KUAN YEW"
				}
			]
		};
		const TIME_NOW = new Date();
		document.addEventListener('DOMContentLoaded', () => {
			for (let link of document.getElementsByTagName('nav')[0].getElementsByTagName('a')) link.href += `#${TYPE.short}`;
			document.getElementsByTagName('h1')[0].appendChild(document.createTextNode(` (${TYPE.long})`))
			const BODY = document.getElementById("content");
			let res = "<table>";
			let count = 0;
			DATA[TYPE.short].forEach(book => {
				const S = book.due;
				res = `${res}<tr onmouseover = 'info(${count})'${S < TIME_NOW ? ' class="overdue"' : ''}><td>${S.getUTCDate()}/${S.getUTCMonth() + 1}/${S.getUTCFullYear()}</td><td class = "tooltip">${book.name}<span class = "tooltiptext"><div ${S < TIME_NOW ? 'class="od "' : ''}style = "padding: 12px;"><div style = "font-size: 12px;">AUTHOR</div><div style = "font-size: 20px;">${book.author}</div><div style = "font-size: 12px;">SYPNOSIS</div><div style = "font-size: 12px; width: 200px; height: 120px; overflow: scroll">${book.sypnosis}</div><div style = "font-size: 12px;">DUE DATE</div>${S < TIME_NOW ? ' <div style = "font-size: 20px; color: red">OVERDUE</div>' : `<div style = "font-size: 20px;">${S.getUTCDate()}/${S.getUTCMonth() + 1}/${S.getUTCFullYear()}</div>`}</span></td></tr>`;
				count++;
			});
			res = `${res}</table>`;
			BODY.innerHTML = res;
		});
		const info = (id) => {
			// help plox
			const body = document.getElementById("content");
			let res = body.innerHTML;
			res = `${res}<div class = ></div>`;
		}
	</script>
</head>
<body>
	<nav id='nav'>
		<a href='books.html'><img src='../assets/icons/library.svg'>Books</a>
		<a href='recommendations.html'><img src='../assets/icons/library.svg'>Recommended</a>
		<a href='fines.html'><img src='../assets/icons/dollar-symbol.svg'>Fines</a>
		<a href="index.html"><img src='../assets/icons/back-arrow.svg'>Return</a>
	</nav>
	<main>
		<h1>Borrowed Books</h1>
		<div id = "content">

		</div>
	</main>
</body>
</html>